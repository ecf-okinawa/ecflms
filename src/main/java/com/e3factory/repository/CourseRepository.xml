<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC
        "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.e3factory.repository.CourseRepository">
	<select id="findById" resultType="com.e3factory.dto.Course">
		SELECT
			id,
			name,
			user_id as "userId",
			start_date as "startDate",
			end_date as "endDate",
			capacity,
			location
		FROM courses
		WHERE id = #{id}
	</select>
	<select id="findByUserId" resultType="com.e3factory.dto.Course">
		SELECT
			id,
			name,
			user_id as "userId",
			start_date as "startDate",
			end_date as "endDate",
			capacity,
			location
		FROM courses
		WHERE user_id = #{userId}
	</select>
	<select id="findAll" resultType="com.e3factory.dto.Course">
		SELECT
			id,
			name,
			user_id as "userId",
			start_date as "startDate",
			end_date as "endDate",
			capacity,
			location
		FROM courses
	</select>
	<insert id="insert">
		INSERT INTO courses(id,name,user_id,start_date,end_date,capacity,location)
		SELECT MAX(id)+1,#{name},#{userId},#{startDate},#{endDate},#{capacity},#{location} FROM courses;
	</insert>
	<update id="update">
		UPDATE courses
		SET name = #{name},user_id = #{userId},start_date = #{startDate},end_date = #{endDate},
		capacity=#{capacity}, location=#{location}
		WHERE id = #{id}
	</update>
	<delete id="delete">
		DELETE FROM courses WHERE id = #{id}
	</delete>
</mapper>