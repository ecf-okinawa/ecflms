<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC
        "-//mybatis.org//DTD Mapper 3.0//EN"
        "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.e3factory.repository.CourseInfoRepository">
	<select id="findById" resultMap="findMap">
		SELECT
			c.id,
			c.name,
			u.name as uname,
			c.start_date,
			c.end_date,
			c.capacity,
			c.location
		FROM
			courses c
			LEFT JOIN users u ON c.user_id = u.id
		WHERE
			c.id = #{id}
		ORDER BY c.id
	</select>
	<select id="find" resultMap="findMap">
		SELECT
			c.id,
			c.name,
			u.name as uname,
			c.start_date,
			c.end_date,
			c.capacity,
			c.location
		FROM
			courses c
			LEFT JOIN users u ON c.user_id = u.id
		ORDER BY c.id
	</select>
	<resultMap id="findMap" type="com.e3factory.dto.CourseInfo">
		<id property="id" column="id" />
		<result property="name" column="name" />
		<result property="teacherName" column="uname" />
		<result property="startDate" column="start_date" />
		<result property="endDate" column="end_date" />
		<result property="capacity" column="capacity" />
		<result property="location" column="location" />
	</resultMap>
</mapper>